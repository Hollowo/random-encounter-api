generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Address {
  id          String   @id @map("id")
  createdAt   DateTime @default(now()) @map("created_at")
  description String   @map("description")
  cityId      String   @map("city_id")
  provinceId  String   @map("province_id")
  countryId   String   @map("country_id")
  city        City     @relation(fields: [cityId], references: [id])
  country     Country  @relation(fields: [countryId], references: [id])
  province    Province @relation(fields: [provinceId], references: [id])
  user        User[]

  @@map("address")
}

model Country {
  id       String     @id @map("id")
  name     String     @map("name")
  flag     String     @map("flag")
  Address  Address[]
  Province Province[]

  @@map("country")
}

model Province {
  id        String    @id @map("id")
  name      String    @map("name")
  countryId String    @map("country_id")
  Address   Address[]
  City      City[]
  country   Country   @relation(fields: [countryId], references: [id])

  @@map("province")
}

model City {
  id         String    @id @map("id")
  name       String    @map("name")
  provinceId String    @map("province_id")
  Address    Address[]
  province   Province  @relation(fields: [provinceId], references: [id])

  @@map("city")
}

model User {
  id         String   @id @map("id")
  createdAt  DateTime @default(now()) @map("created_at")
  name       String   @map("name")
  email      String   @map("email")
  role       Role     @map("role")
  authorized Boolean  @map("authorized")
  addressId  String   @map("address_id")
  address    Address  @relation(fields: [addressId], references: [id])

  @@map("user")
}

enum Role {
  USER
  ADMIN
}
